class x{constructor(t){this.id=t,this.audio=document.createElement("audio"),this.audio.controls=!0,this.audio.style.width="100%";let e=document.createElement("source");e.src=`testimonies/${this.id}.mp3`,e.type="audio/mpeg",this.audio.appendChild(e)}}class p{constructor(t=25,e=3,n="#000000",s="#ffffff",r=1){this.div=document.createElement("div"),this.div.className="spinner",this.div.style.border=`${e}px solid ${s}`,this.div.style.borderRadius="50%",this.div.style.borderTop=`${e}px solid ${n}`,this.div.style.height=`${t}px`,this.div.style.width=`${t}px`,this.div.style.animation=`spin ${r}s linear infinite`,this.div.style.margin="auto"}}class a{constructor(t){this.testimonyMetadata=t,this.fetchTranscription(),this.createRootDiv(),this.createAndRenderSpinner(),this.transcription.then(e=>{this.transcription=e,this.removeSpinner(),this.createTextDiv(),this.organizeTranscriptionInTextDiv()})}createRootDiv(){this.rootDiv=document.createElement("div")}fetchTranscription(){this.transcription=fetch(`/testimonies/${this.testimonyMetadata.id}.txt`).then(t=>t.text()).then(t=>t.split(`

`))}createAndRenderSpinner(){this.spinner=new p,this.rootDiv.append(this.spinner.div)}removeSpinner(){this.spinner.div.remove()}createTextDiv(){this.textDiv=document.createElement("div"),this.textDiv.style.marginBottom="5px",this.textDiv.style.transition="max-height 0.02s",this.textDiv.style.scrollBehavior="smooth",this.rootDiv.append(this.textDiv)}organizeTranscriptionInTextDiv(){this.textDiv.append(this.transcription.toString())}}class h extends a{constructor(t){super(t),this.expanded=!1,this.transcription.then(e=>{this.transcription=e,this.createToolBar(),this.createMoreButton(),this.createLink()})}createToolBar(){this.toolBar=document.createElement("div"),this.toolBar.style.display="flex",this.toolBar.style.justifyContent="space-between",this.rootDiv.append(this.toolBar)}expandText(){this.expanded=!0,this.textDiv.style.maxHeight=`${window.innerHeight-200}px`,this.textDiv.style.overflow="scroll",this.moreButton.innerText="Show less text",setTimeout(()=>window.scroll(0,this.rootDiv.offsetTop-100),40)}collapseText(){this.expanded=!1,this.textDiv.style.maxHeight="200px",this.textDiv.style.overflow="hidden",this.textDiv.scroll(0,0),this.moreButton.innerText="Show more text"}toggleText(){this.expanded?this.collapseText():this.expandText()}createMoreButton(){this.moreButton=document.createElement("button"),this.moreButton.style.marginBottom="5px",this.moreButton.onclick=()=>this.toggleText(),this.toolBar.appendChild(this.moreButton),this.collapseText()}createLink(){let t=new URLSearchParams(this.testimonyMetadata),e=document.createElement("a");e.href=`/${this.testimonyMetadata.type}.html?${t.toString()}`,e.append("Open account in a new page"),this.toolBar.append(e)}}class l extends a{createRootDiv(){super.createRootDiv()}createTextDiv(){super.createTextDiv(),this.textDiv.style.fontSize="20px"}}class c{constructor(t,e){this.transcription=t,this.textDiv=e;for(let n of this.transcription){let[s,r]=n.split(`
`),o=document.createElement("p");o.id=s,o.append(r),o.style.margin="0px",o.style.textIndent="25px",this.textDiv.append(o)}}}class m extends h{organizeTranscriptionInTextDiv(){this.formatter=new c(this.transcription,this.textDiv)}}class v extends l{organizeTranscriptionInTextDiv(){this.formatter=new c(this.transcription,this.textDiv)}}class d{constructor(t,e){this.transcription=t,this.textDiv=e;for(let n of this.transcription){if(n.length===0)continue;let s=document.createElement("p");s.append(n),s.style.margin="0px",s.style.textIndent="25px",this.textDiv.append(s)}}}class u extends h{organizeTranscriptionInTextDiv(){this.formatter=new d(this.transcription,this.textDiv)}}export{m as A,u as D,p as S,x as a,v as b};
